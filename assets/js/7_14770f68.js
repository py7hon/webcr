(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{390:function(e,t,i){"use strict";i.r(t);i(312);var n=i(408),s=i(409),r=i(419),a={name:"browse-filter",components:{DropdownSelector:n.a,Checkbox:s.a,SeriesList:r.a},data:function(){return{filterOptions:[{key:"alpha",value:this.$t("media.filters.alphabetical")},{key:"featured",value:this.$t("media.filters.featured")},{key:"newest",value:this.$t("media.filters.newest")},{key:"popular",value:this.$t("media.filters.popular")},{key:"simulcast",value:this.$t("media.filters.simulcast")},{key:"updated",value:this.$t("media.filters.updated")}],filter:null,mediaOptions:[{key:"anime",value:this.$t("media.types.anime")},{key:"drama",value:this.$t("media.types.drama")}],mediaType:null}},mounted:function(){this.filter=this.filterOptions[0],this.mediaType=this.mediaOptions[0]},computed:{compact:{get:function(){return this.$store.state.media.displayCompact},set:function(e){this.$store.commit("media/setCompactDisplay",e)}},loading:function(){return this.$store.state.browse.loading}}},o=i(2),l=Object(o.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.loading?e._e():i("div",{staticClass:"row mb-2"},[i("dropdown-selector",{staticClass:"col-lg-3 col-md-4 col-sm-6 mb-2",attrs:{label:e.$t("media.filter"),options:e.filterOptions},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),e._v(" "),i("dropdown-selector",{staticClass:"col-lg-3 col-md-4 col-sm-6 mb-2",attrs:{label:e.$t("media.media"),options:e.mediaOptions},model:{value:e.mediaType,callback:function(t){e.mediaType=t},expression:"mediaType"}}),e._v(" "),i("checkbox",{staticClass:"col-lg-3 col-md-4 col-sm-6 mb-2",attrs:{label:e.$t("media.compact")},model:{value:e.compact,callback:function(t){e.compact=t},expression:"compact"}})],1),e._v(" "),i("series-list",{attrs:{filter:e.filter?e.filter.key:"",mediaType:e.mediaType?e.mediaType.key:""}})],1)}),[],!1,null,null,null);t.default=l.exports},395:function(e,t,i){"use strict";var n={name:"loading",data:function(){return{count:5}}},s=(i(398),i(2)),r=Object(s.a)(n,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"spinner"},this._l(this.count,(function(e){return t("div",{key:e,class:"rect rect"+e})})),0)}),[],!1,null,"597d1897",null);t.a=r.exports},396:function(e,t,i){},397:function(e,t,i){},398:function(e,t,i){"use strict";i(396)},399:function(e,t,i){"use strict";var n={name:"card"},s=(i(400),i(2)),r=Object(s.a)(n,(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"card bg-dark text-light"},[this._t("default")],2)}),[],!1,null,"2edc5dc4",null);t.a=r.exports},400:function(e,t,i){"use strict";i(397)},402:function(e,t,i){"use strict";var n=i(1);t.a=new n.a},408:function(e,t,i){"use strict";i(28),i(38),i(39),i(40),i(41),i(42),i(37),i(43),i(44),i(15);function n(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(l)throw a}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var r={name:"dropdown-selector",props:{options:Array,label:String,value:{key:String,value:String}},methods:{onChange:function(e){var t,i=n(this.options);try{for(i.s();!(t=i.n()).done;){var s=t.value;if(s.value===e.target.value){this.$emit("input",s);break}}}catch(e){i.e(e)}finally{i.f()}}}},a=i(2),o=Object(a.a)(r,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"input-group"},[i("div",{staticClass:"input-group-prepend"},[i("label",{staticClass:"input-group-text bg-dark text-light border-warning"},[e._v(e._s(e.label))])]),e._v(" "),i("select",{staticClass:"custom-select border-warning bg-secondary text-white",domProps:{value:e.value?e.value.value:""},on:{change:e.onChange}},e._l(e.options,(function(t){return i("option",{key:t.key},[e._v(e._s(t.value))])})),0)])}),[],!1,null,null,null);t.a=o.exports},409:function(e,t,i){"use strict";var n={name:"checkbox",props:{value:Boolean,label:String},methods:{input:function(e){this.$emit("input",e.target.checked)}}},s=i(2),r=Object(s.a)(n,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"input-group"},[t("div",{staticClass:"input-group-prepend"},[t("label",{staticClass:"input-group-text bg-dark border-warning text-light"},[this._v(this._s(this.label))])]),this._v(" "),t("div",{staticClass:"input-group-append"},[t("div",{staticClass:"input-group-text bg-warning border-warning"},[t("input",{attrs:{type:"checkbox"},domProps:{checked:this.value},on:{input:this.input}})])])])}),[],!1,null,null,null);t.a=r.exports},411:function(e,t,i){},412:function(e,t,i){},413:function(e,t,i){},416:function(e,t,i){"use strict";i(411)},417:function(e,t,i){"use strict";i(412)},418:function(e,t,i){"use strict";i(413)},419:function(e,t,i){"use strict";i(20),i(15),i(21),i(312);var n=i(395),s=i(399),r={name:"Ribbon"},a=(i(416),i(2)),o=Object(a.a)(r,(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"ribbon"})}),[],!1,null,"198489a2",null).exports,l=i(313),c=(i(377),i(1)),u=i(379),d=i.n(u);function p(e,t,i,n,s,r,a){try{var o=e[r](a),l=o.value}catch(e){return void i(e)}o.done?t(l):Promise.resolve(l).then(n,s)}c.a.use(d.a);var f={name:"series-card-context",props:{value:Boolean,position:{x:Number,y:Number},seriesId:String,inQueue:Boolean},methods:{close:function(){this.$emit("input",!1)},toggleWatched:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.close(),t.$emit("beginUpdate"),e.next=4,t.$store.dispatch("media/toggleQueue",{seriesId:t.seriesId,inQueue:t.inQueue});case 4:return e.next=6,t.$store.dispatch("media/updateSeries",t.seriesId);case 6:t.$emit("updated");case 7:case"end":return e.stop()}}),e)})),function(){var t=this,i=arguments;return new Promise((function(n,s){var r=e.apply(t,i);function a(e){p(r,n,s,a,o,"next",e)}function o(e){p(r,n,s,a,o,"throw",e)}a(void 0)}))})()}}},m=(i(417),Object(a.a)(f,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.value?i("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.close,expression:"close"}],staticClass:"list-group position-absolute text-nowrap",style:{left:e.position.x+"px",top:e.position.y+"px"}},[e.inQueue?i("a",{staticClass:"list-group-item list-group-item-action bg-dark text-light",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.toggleWatched(t)}}},[e._v(e._s(e.$t("media.queueRemove")))]):i("a",{staticClass:"list-group-item list-group-item-action bg-dark text-light",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.toggleWatched(t)}}},[e._v(e._s(e.$t("media.queueAdd")))])]):e._e()}),[],!1,null,"32b773fa",null).exports),h=i(402),v={name:"series-card",props:{series:Object},components:{Card:s.a,Ribbon:o,Loading:n.a,SeriesCardContext:m},mounted:function(){this.popper=new l.default(this.$refs.card.$el,this.$refs.popper.$el,{placement:"right-start"})},created:function(){var e=this;h.a.$on("closeContextMenus",(function(){e.showContextMenu=!1}))},methods:{setPopperVisible:function(e){this.showPopper=e,this.popperHeight=this.$refs.card.$el.offsetHeight,this.popper.scheduleUpdate()},contextMenu:function(e){h.a.$emit("closeContextMenus"),this.showContextMenu=!0,this.contextMenuPosition.x=e.clientX-this.$refs.card.$el.getBoundingClientRect().left,this.contextMenuPosition.y=e.clientY-this.$refs.card.$el.getBoundingClientRect().top},seriesUpdated:function(){this.loading=!1},seriesBeginUpdate:function(){this.cardHeight=this.$refs.card.$el.getBoundingClientRect().height,this.loading=!0}},data:function(){return{popper:null,showPopper:!1,popperHeight:0,loading:!1,cardHeight:0,showContextMenu:!1,contextMenuPosition:{x:0,y:0}}}},g=(i(418),Object(a.a)(v,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.loading?i("card",{style:{height:e.cardHeight+"px"}},[i("loading",{staticClass:"my-auto"})],1):i("card",{ref:"card",nativeOn:{contextmenu:function(t){return t.preventDefault(),t.stopPropagation(),e.contextMenu(t)}}},[i("router-link",{staticClass:"text-reset",attrs:{to:"/series/"+e.series.series_id}},[i("div",{staticClass:"card-img-top image-container"},[e.series.in_queue?i("ribbon"):e._e(),e._v(" "),i("img",{staticClass:"card-img-top",attrs:{src:e.$https(e.series.portrait_image.thumb_url),alt:"Series Thumbnail"},on:{mouseenter:function(t){return e.setPopperVisible(!0)},mouseleave:function(t){return e.setPopperVisible(!1)}}})],1)]),e._v(" "),i("div",{staticClass:"mx-2 my-1 text-truncate"},[i("router-link",{staticClass:"text-reset",attrs:{to:"/series/"+e.series.series_id,title:e.series.name}},[e._v(e._s(e.series.name))])],1)],1),e._v(" "),i("card",{ref:"popper",staticClass:"popper block-truncate",style:{display:e.showPopper?"block":"none",height:e.popperHeight+"px"}},[e._v("\n    "+e._s(e.series.description)+"\n  ")]),e._v(" "),i("series-card-context",{attrs:{position:e.contextMenuPosition,inQueue:e.series.in_queue,seriesId:e.series.series_id},on:{beginUpdate:e.seriesBeginUpdate,updated:e.seriesUpdated},model:{value:e.showContextMenu,callback:function(t){e.showContextMenu=t},expression:"showContextMenu"}})],1)}),[],!1,null,"5f0092c6",null).exports),b={name:"compact-series-card",props:{series:{series_id:String,name:String}},components:{Card:s.a}};function y(e,t,i,n,s,r,a){try{var o=e[r](a),l=o.value}catch(e){return void i(e)}o.done?t(l):Promise.resolve(l).then(n,s)}function x(e){return function(){var t=this,i=arguments;return new Promise((function(n,s){var r=e.apply(t,i);function a(e){y(r,n,s,a,o,"next",e)}function o(e){y(r,n,s,a,o,"throw",e)}a(void 0)}))}}var _={name:"series-list",components:{SeriesCard:g,CompactSeriesCard:Object(a.a)(b,(function(){var e=this.$createElement,t=this._self._c||e;return t("router-link",{attrs:{to:"/series/"+this.series.series_id,title:this.series.name}},[t("card",[t("div",{staticClass:"mx-4 my-2 text-truncate"},[this._v("\n      "+this._s(this.series.name)+"\n    ")])])],1)}),[],!1,null,null,null).exports,Loading:n.a},props:{filter:String,mediaType:String},data:function(){return{limit:50,offset:0,loadingMore:!1,canLoadMore:!1}},computed:{seriesList:function(){return this.$store.state.browse.seriesList},compact:function(){return this.$store.state.media.displayCompact},locale:function(){return this.$store.state.locale.locale},loading:function(){return this.$store.state.browse.loading},filters:function(){return this.filter+this.mediaType+this.locale}},methods:{updateSeriesList:function(){var e=this;return x(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.offset=0,t.next=3,e.$store.dispatch("browse/listSeries",{filter:e.filter,mediaType:e.mediaType,limit:e.limit,offset:e.offset}).then((function(t){e.seriesList.length%e.limit!=0||0===t.length?e.canLoadMore=!1:e.canLoadMore=!0}));case 3:case"end":return t.stop()}}),t)})))()},loadMore:function(){var e=this;return x(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loadingMore=!0,e.offset+=e.limit,t.next=4,e.$store.dispatch("browse/listSeries",{filter:e.filter,mediaType:e.mediaType,limit:e.limit,offset:e.offset,append:!0}).then((function(t){e.loadingMore=!1,e.seriesList.length%e.limit!=0||0===t.length?e.canLoadMore=!1:e.canLoadMore=!0}));case 4:case"end":return t.stop()}}),t)})))()}},watch:{filters:function(){this.updateSeriesList()}}},C=Object(a.a)(_,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.loading?i("loading"):i("div",{staticClass:"mb-4"},[e.seriesList.length?e._e():i("div",{staticClass:"alert alert-info bg-dark text-light"},[e._v("\n    "+e._s(e.$t("media.emptyBrowse"))+"\n  ")]),e._v(" "),e.compact?i("div",{staticClass:"row"},e._l(e.seriesList,(function(e){return i("div",{key:e.series_id,staticClass:"col-12 mb-2"},[i("compact-series-card",{attrs:{series:e}})],1)})),0):i("div",{staticClass:"row"},e._l(e.seriesList,(function(e){return i("div",{key:e.series_id,staticClass:"col-lg-2 col-md-3 col-sm-4 col-6 mb-4"},[i("series-card",{attrs:{series:e}})],1)})),0),e._v(" "),e.canLoadMore?i("div",[e.loadingMore?i("loading"):i("button",{staticClass:"btn btn-block btn-primary",on:{click:e.loadMore}},[e._v(e._s(e.$t("media.loadMore")))])],1):e._e()])}),[],!1,null,null,null);t.a=C.exports}}]);